/*
 * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.
 * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).
 * Copyright (C) 2009 Joseph Pecoraro
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1.  Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 * 2.  Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 * 3.  Neither the name of Apple Computer, Inc. ("Apple") nor the names of
 *     its contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
// Keep this ; so that concatenated version of the script worked.
(new Image).src="Images/clearConsoleButtonGlyph.png",(new Image).src="Images/consoleButtonGlyph.png",(new Image).src="Images/dockButtonGlyph.png",(new Image).src="Images/enableOutlineButtonGlyph.png",(new Image).src="Images/enableSolidButtonGlyph.png",(new Image).src="Images/excludeButtonGlyph.png",(new Image).src="Images/focusButtonGlyph.png",(new Image).src="Images/largerResourcesButtonGlyph.png",(new Image).src="Images/nodeSearchButtonGlyph.png",(new Image).src="Images/pauseOnExceptionButtonGlyph.png",(new Image).src="Images/percentButtonGlyph.png",(new Image).src="Images/recordButtonGlyph.png",(new Image).src="Images/recordToggledButtonGlyph.png",(new Image).src="Images/reloadButtonGlyph.png",(new Image).src="Images/undockButtonGlyph.png";var WebInspector={resources:{},missingLocalizedStrings:{},pendingDispatches:0,get platform(){return"_platform"in this||(this._platform=InspectorFrontendHost.platform()),this._platform},get platformFlavor(){return"_platformFlavor"in this||(this._platformFlavor=this._detectPlatformFlavor()),this._platformFlavor},_detectPlatformFlavor:function(){var e=navigator.userAgent;if("windows"===this.platform)return(t=e.match(/Windows NT (\d+)\.(?:\d+)/))&&6<=t[1]?WebInspector.PlatformFlavor.WindowsVista:null;if("mac"===this.platform){var t;if(!(t=e.match(/Mac OS X\s*(?:(\d+)_(\d+))?/))||10!=t[1])return WebInspector.PlatformFlavor.MacSnowLeopard;switch(Number(t[2])){case 4:return WebInspector.PlatformFlavor.MacTiger;case 5:return WebInspector.PlatformFlavor.MacLeopard;case 6:default:return WebInspector.PlatformFlavor.MacSnowLeopard}}return null},get port(){return"_port"in this||(this._port=InspectorFrontendHost.port()),this._port},get previousFocusElement(){return this._previousFocusElement},get currentFocusElement(){return this._currentFocusElement},set currentFocusElement(e){if(this._currentFocusElement!==e&&(this._previousFocusElement=this._currentFocusElement),this._currentFocusElement=e,this._currentFocusElement){this._currentFocusElement.focus();
// Make a caret selection inside the new element if there isn't a range selection and
// there isn't already a caret selection inside.
var t=window.getSelection();if(t.isCollapsed&&!this._currentFocusElement.isInsertionCaretInside()){var n=this._currentFocusElement.ownerDocument.createRange();n.setStart(this._currentFocusElement,0),n.setEnd(this._currentFocusElement,0),t.removeAllRanges(),t.addRange(n)}}else this._previousFocusElement&&this._previousFocusElement.blur()},get currentPanel(){return this._currentPanel},set currentPanel(e){if(this._currentPanel!==e){if(this._currentPanel&&this._currentPanel.hide(),this._currentPanel=e,this.updateSearchLabel(),e&&(e.show(),this.currentQuery))if(e.performSearch){
// Perform the search on a timeout so the panel switches fast.
setTimeout(function(){this.updateSearchMatchesCount(),e.currentQuery=this.currentQuery,e.performSearch(this.currentQuery)}.bind(this),0)}else
// Update to show Not found for panels that can't be searched.
this.updateSearchMatchesCount();for(var t in WebInspector.panels)WebInspector.panels[t]===e&&(WebInspector.settings.lastActivePanel=t,this._panelHistory.setPanel(t))}},createDOMBreakpointsSidebarPane:function(){var t=new WebInspector.NativeBreakpointsSidebarPane(WebInspector.UIString("DOM Breakpoints"));return WebInspector.breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.DOMBreakpointAdded,function(e){t.addBreakpointItem(new WebInspector.BreakpointItem(e.data))}),t},createXHRBreakpointsSidebarPane:function(){var t=new WebInspector.XHRBreakpointsSidebarPane;return WebInspector.breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.XHRBreakpointAdded,function(e){t.addBreakpointItem(new WebInspector.BreakpointItem(e.data))}),t},_createPanels:function(){var e=(InspectorFrontendHost.hiddenPanels()||"").split(",");-1===e.indexOf("elements")&&(this.panels.elements=new WebInspector.ElementsPanel),-1===e.indexOf("resources")&&(this.panels.resources=new WebInspector.ResourcesPanel),-1===e.indexOf("network")&&(this.panels.network=new WebInspector.NetworkPanel),-1===e.indexOf("scripts")&&(this.panels.scripts=new WebInspector.ScriptsPanel),-1===e.indexOf("timeline")&&(this.panels.timeline=new WebInspector.TimelinePanel),-1===e.indexOf("profiles")&&(this.panels.profiles=new WebInspector.ProfilesPanel,this.panels.profiles.registerProfileType(new WebInspector.CPUProfileType),Preferences.heapProfilerPresent&&(Preferences.detailedHeapProfiles?this.panels.profiles.registerProfileType(new WebInspector.DetailedHeapshotProfileType):this.panels.profiles.registerProfileType(new WebInspector.HeapSnapshotProfileType))),-1===e.indexOf("audits")&&(this.panels.audits=new WebInspector.AuditsPanel),-1===e.indexOf("console")&&(this.panels.console=new WebInspector.ConsolePanel)},get attached(){return this._attached},set attached(e){if(this._attached!==e){this._attached=e,this.updateSearchLabel();var t=document.getElementById("dock-status-bar-item"),n=document.body;t.title=e?(n.removeStyleClass("detached"),n.addStyleClass("attached"),WebInspector.UIString("Undock into separate window.")):(n.removeStyleClass("attached"),n.addStyleClass("detached"),WebInspector.UIString("Dock to main window.")),this.drawer&&this.drawer.resize()}},get errors(){return this._errors||0},set errors(e){e=Math.max(e,0),this._errors!==e&&(this._errors=e,this._updateErrorAndWarningCounts())},get warnings(){return this._warnings||0},set warnings(e){e=Math.max(e,0),this._warnings!==e&&(this._warnings=e,this._updateErrorAndWarningCounts())},_updateErrorAndWarningCounts:function(){var e=document.getElementById("error-warning-count");if(e)if(this.errors||this.warnings){if(e.removeStyleClass("hidden"),e.removeChildren(),this.errors){var t=document.createElement("span");t.id="error-count",t.textContent=this.errors,e.appendChild(t)}if(this.warnings){var n=document.createElement("span");n.id="warning-count",n.textContent=this.warnings,e.appendChild(n)}this.errors?this.warnings?1==this.errors?1==this.warnings?e.title=WebInspector.UIString("%d error, %d warning",this.errors,this.warnings):e.title=WebInspector.UIString("%d error, %d warnings",this.errors,this.warnings):1==this.warnings?e.title=WebInspector.UIString("%d errors, %d warning",this.errors,this.warnings):e.title=WebInspector.UIString("%d errors, %d warnings",this.errors,this.warnings):1==this.errors?e.title=WebInspector.UIString("%d error",this.errors):e.title=WebInspector.UIString("%d errors",this.errors):1==this.warnings?e.title=WebInspector.UIString("%d warning",this.warnings):this.warnings?e.title=WebInspector.UIString("%d warnings",this.warnings):e.title=null}else e.addStyleClass("hidden")},highlightDOMNode:function(e){"_hideDOMNodeHighlightTimeout"in this&&(clearTimeout(this._hideDOMNodeHighlightTimeout),delete this._hideDOMNodeHighlightTimeout),this._highlightedDOMNodeId!==e&&((this._highlightedDOMNodeId=e)?InspectorBackend.highlightDOMNode(e):InspectorBackend.hideDOMNodeHighlight())},highlightDOMNodeForTwoSeconds:function(e){this.highlightDOMNode(e),this._hideDOMNodeHighlightTimeout=setTimeout(this.highlightDOMNode.bind(this,0),2e3)},wireElementWithDOMNode:function(e,t){e.addEventListener("click",this._updateFocusedNode.bind(this,t),!1),e.addEventListener("mouseover",this.highlightDOMNode.bind(this,t),!1),e.addEventListener("mouseout",this.highlightDOMNode.bind(this,0),!1)},_updateFocusedNode:function(e){this.currentPanel=this.panels.elements,this.panels.elements.updateFocusedNode(e)},get networkResources(){return this.panels.network.resources},networkResourceById:function(e){return this.panels.network.resourceById(e)},forAllResources:function(e){WebInspector.resourceTreeModel.forAllResources(e)},resourceForURL:function(e){return this.resourceTreeModel.resourceForURL(e)},openLinkExternallyLabel:function(){return WebInspector.UIString("Open Link in New Window")},PlatformFlavor:{WindowsVista:"windows-vista",MacTiger:"mac-tiger",MacLeopard:"mac-leopard",MacSnowLeopard:"mac-snowleopard"}};(function(){WebInspector.queryParamsObject={};var e=window.location.search;if(e)for(var t=e.substring(1).split("&"),n=0;n<t.length;++n){var r=t[n].split("=");WebInspector.queryParamsObject[r[0]]=r[1]}})(),WebInspector.loaded=function(){if("page"in WebInspector.queryParamsObject){var e=WebInspector.queryParamsObject.page,t="host"in WebInspector.queryParamsObject?WebInspector.queryParamsObject.host:window.location.host;return WebInspector.socket=new WebSocket("ws://"+t+"/devtools/page/"+e),WebInspector.socket.onmessage=function(e){InspectorBackend.dispatch(e.data)},WebInspector.socket.onerror=function(e){console.error(e)},void(WebInspector.socket.onopen=function(){InspectorFrontendHost.sendMessageToBackend=WebInspector.socket.send.bind(WebInspector.socket),InspectorFrontendHost.loaded=WebInspector.socket.send.bind(WebInspector.socket,"loaded"),WebInspector.doLoadedDone()})}WebInspector.doLoadedDone()},WebInspector.doLoadedDone=function(){InspectorFrontendHost.loaded();var e=WebInspector.platform;document.body.addStyleClass("platform-"+e);var t=WebInspector.platformFlavor;t&&document.body.addStyleClass("platform-"+t);var n=WebInspector.port;document.body.addStyleClass("port-"+n),WebInspector.settings=new WebInspector.Settings,this._registerShortcuts(),
// set order of some sections explicitly
WebInspector.shortcutsHelp.section(WebInspector.UIString("Console")),WebInspector.shortcutsHelp.section(WebInspector.UIString("Elements Panel")),this.drawer=new WebInspector.Drawer,this.console=new WebInspector.ConsoleView(this.drawer),this.drawer.visibleView=this.console,this.resourceTreeModel=new WebInspector.ResourceTreeModel,this.networkManager=new WebInspector.NetworkManager(this.resourceTreeModel),this.domAgent=new WebInspector.DOMAgent,InspectorBackend.registerDomainDispatcher("Inspector",this),this.resourceCategories={documents:new WebInspector.ResourceCategory("documents",WebInspector.UIString("Documents"),"rgb(47,102,236)"),stylesheets:new WebInspector.ResourceCategory("stylesheets",WebInspector.UIString("Stylesheets"),"rgb(157,231,119)"),images:new WebInspector.ResourceCategory("images",WebInspector.UIString("Images"),"rgb(164,60,255)"),scripts:new WebInspector.ResourceCategory("scripts",WebInspector.UIString("Scripts"),"rgb(255,121,0)"),xhr:new WebInspector.ResourceCategory("xhr",WebInspector.UIString("XHR"),"rgb(231,231,10)"),fonts:new WebInspector.ResourceCategory("fonts",WebInspector.UIString("Fonts"),"rgb(255,82,62)"),websockets:new WebInspector.ResourceCategory("websockets",WebInspector.UIString("WebSockets"),"rgb(186,186,186)"),// FIXME: Decide the color.
other:new WebInspector.ResourceCategory("other",WebInspector.UIString("Other"),"rgb(186,186,186)")},this.cssModel=new WebInspector.CSSStyleModel,this.debuggerModel=new WebInspector.DebuggerModel,this.breakpointManager=new WebInspector.BreakpointManager,this.panels={},this._createPanels(),this._panelHistory=new WebInspector.PanelHistory;var r=document.getElementById("toolbar"),s=r.children[0];for(var o in this.panelOrder=[],this.panels)s=WebInspector.addPanelToolbarIcon(r,this.panels[o],s);this.Tips={ResourceNotCompressed:{id:0,message:WebInspector.UIString("You could save bandwidth by having your web server compress this transfer with gzip or zlib.")}},this.Warnings={IncorrectMIMEType:{id:0,message:WebInspector.UIString("Resource interpreted as %s but transferred with MIME type %s.")}},this.addMainEventListeners(document),window.addEventListener("resize",this.windowResize.bind(this),!0),document.addEventListener("focus",this.focusChanged.bind(this),!0),document.addEventListener("keydown",this.documentKeyDown.bind(this),!1),document.addEventListener("beforecopy",this.documentCanCopy.bind(this),!0),document.addEventListener("copy",this.documentCopy.bind(this),!0),document.addEventListener("contextmenu",this.contextMenuEventFired.bind(this),!0);var i=document.getElementById("dock-status-bar-item");i.addEventListener("click",this.toggleAttach.bind(this),!1),this.attached?i.title=WebInspector.UIString("Undock into separate window."):i.title=WebInspector.UIString("Dock to main window."),document.getElementById("error-warning-count").addEventListener("click",this.showConsole.bind(this),!1),this._updateErrorAndWarningCounts();var a=document.getElementById("search");a.addEventListener("search",this.performSearch.bind(this),!1),// when the search is emptied
a.addEventListener("mousedown",this._searchFieldManualFocus.bind(this),!1),// when the search field is manually selected
a.addEventListener("keydown",this._searchKeyDown.bind(this),!0),r.addEventListener("mousedown",this.toolbarDragStart,!0),document.getElementById("close-button-left").addEventListener("click",this.close,!0),document.getElementById("close-button-right").addEventListener("click",this.close,!0),this.extensionServer.initExtensions(),InspectorBackend.populateScriptObjects(function(){WebInspector.currentPanel||WebInspector.showPanel(WebInspector.settings.lastActivePanel)}),(Preferences.debuggerAlwaysEnabled||WebInspector.settings.debuggerEnabled)&&this.debuggerModel.enableDebugger(),(Preferences.profilerAlwaysEnabled||WebInspector.settings.profilerEnabled)&&InspectorBackend.enableProfiler(),WebInspector.settings.monitoringXHREnabled&&InspectorBackend.setMonitoringXHREnabled(!0),InspectorBackend.setConsoleMessagesEnabled(!0),
// As a DOMAgent method, this needs to happen after the frontend has loaded and the agent is available.
InspectorBackend.getSupportedCSSProperties(function(e){WebInspector.cssNameCompletions=new WebInspector.CSSCompletions(e)})},WebInspector.addPanelToolbarIcon=function(e,t,n){var r=t.toolbarItem;return this.panelOrder.push(t),r.addEventListener("click",this._toolbarItemClicked.bind(this)),n?e.insertBefore(r,n.nextSibling):e.insertBefore(r,e.firstChild),r};var windowLoaded=function(){var e=InspectorFrontendHost.localizedStringsURL();if(e){var t=document.createElement("script");t.addEventListener("load",WebInspector.loaded.bind(WebInspector),!1),t.type="text/javascript",t.src=e,document.head.appendChild(t)}else WebInspector.loaded();window.removeEventListener("DOMContentLoaded",windowLoaded,!1),delete windowLoaded};window.addEventListener("DOMContentLoaded",windowLoaded,!1),WebInspector.dispatch=function(e){WebInspector.pendingDispatches++,setTimeout(
// We'd like to enforce asynchronous interaction between the inspector controller and the frontend.
// This is important to LayoutTests.
function(){InspectorBackend.dispatch(e),WebInspector.pendingDispatches--},0)},WebInspector.dispatchMessageFromBackend=function(e){WebInspector.dispatch(e)},WebInspector.windowResize=function(e){this.currentPanel&&this.currentPanel.resize(),this.drawer&&this.drawer.resize()}
/*
WebInspector.windowFocused = function(event)
{
    // Fires after blur, so when focusing on either the main inspector
    // or an <iframe> within the inspector we should always remove the
    // "inactive" class.
    if (event.target.document.nodeType === Node.DOCUMENT_NODE)
        document.body.removeStyleClass("inactive");
}

WebInspector.windowBlurred = function(event)
{
    // Leaving the main inspector or an <iframe> within the inspector.
    // We can add "inactive" now, and if we are moving the focus to another
    // part of the inspector then windowFocused will correct this.
    if (event.target.document.nodeType === Node.DOCUMENT_NODE)
        document.body.addStyleClass("inactive");
}
*/,WebInspector.focusChanged=function(e){this.currentFocusElement=e.target},WebInspector.setAttachedWindow=function(e){this.attached=e},WebInspector.close=function(e){this._isClosing||(this._isClosing=!0,InspectorFrontendHost.closeWindow())},WebInspector.disconnectFromBackend=function(){InspectorFrontendHost.disconnectFromBackend()},WebInspector.documentClick=function(e){var n=e.target.enclosingNodeOrSelfWithNodeName("a");function t(){
// FIXME: support webkit-html-external-link links here.
if(WebInspector.canShowSourceLine(n.href,n.getAttribute("line_number"),n.getAttribute("preferred_panel")))return n.hasStyleClass("webkit-html-external-link")&&(n.removeStyleClass("webkit-html-external-link"),n.addStyleClass("webkit-html-resource-link")),void WebInspector.showSourceLine(n.href,n.getAttribute("line_number"),n.getAttribute("preferred_panel"));if(WebInspector.ProfileType.URLRegExp.exec(n.href))WebInspector.showProfileForURL(n.href);else{var e=n.href.asParsedURL();if(e&&"webkit-link-action"===e.scheme){if("show-panel"===e.host){var t=e.path.substring(1);WebInspector.panels[t]&&WebInspector.showPanel(t)}}else WebInspector.showPanel("resources")}}n&&"_blank"!==n.target&&(
// Prevent the link from navigating, since we don't do any navigation by following links normally.
e.preventDefault(),e.stopPropagation(),WebInspector.followLinkTimeout&&clearTimeout(WebInspector.followLinkTimeout),n.preventFollowOnDoubleClick?
// Start a timeout if this is the first click, if the timeout is canceled
// before it fires, then a double clicked happened or another link was clicked.
1===e.detail&&(WebInspector.followLinkTimeout=setTimeout(t,333)):t())},WebInspector.openResource=function(e,t){var n=WebInspector.resourceForURL(e);t&&n?(WebInspector.panels.resources.showResource(n),WebInspector.showPanel("resources")):InspectorBackend.openInInspectedWindow(n?n.url:e)},WebInspector._registerShortcuts=function(){var e=WebInspector.KeyboardShortcut,t=WebInspector.shortcutsHelp.section(WebInspector.UIString("All Panels")),n=[e.shortcutToString("]",e.Modifiers.CtrlOrMeta),e.shortcutToString("[",e.Modifiers.CtrlOrMeta)];t.addRelatedKeys(n,WebInspector.UIString("Next/previous panel")),t.addKey(e.shortcutToString(e.Keys.Esc),WebInspector.UIString("Toggle console")),t.addKey(e.shortcutToString("f",e.Modifiers.CtrlOrMeta),WebInspector.UIString("Search")),WebInspector.isMac()&&(n=[e.shortcutToString("g",e.Modifiers.Meta),e.shortcutToString("g",e.Modifiers.Meta|e.Modifiers.Shift)],t.addRelatedKeys(n,WebInspector.UIString("Find next/previous")))},WebInspector.documentKeyDown=function(e){var t="INPUT"===e.target.nodeName,n=e.target.enclosingNodeOrSelfWithClass("text-prompt")||WebInspector.isEditingAnyField(),r=WebInspector.isMac()?"U+003F":"U+00BF";// "?" for both platforms
if("F1"===e.keyIdentifier||e.keyIdentifier===r&&e.shiftKey&&(!n&&!t||e.metaKey))return WebInspector.shortcutsHelp.show(),e.stopPropagation(),void e.preventDefault();if(!WebInspector.isEditingAnyField())if(this.currentFocusElement&&this.currentFocusElement.handleKeyEvent&&(this.currentFocusElement.handleKeyEvent(e),e.handled))e.preventDefault();else if(this.currentPanel&&this.currentPanel.handleShortcut&&(this.currentPanel.handleShortcut(e),e.handled))e.preventDefault();else{var s=WebInspector.isMac();switch(e.keyIdentifier){case"Left":!n&&(s?e.metaKey:e.ctrlKey)&&this._panelHistory.canGoBack()&&(this._panelHistory.goBack(),e.preventDefault());break;case"Right":!n&&(s?e.metaKey:e.ctrlKey)&&this._panelHistory.canGoForward()&&(this._panelHistory.goForward(),e.preventDefault());break;case"U+001B":if(// Escape key
e.preventDefault(),this.drawer.fullPanel)return;this.drawer.visible=!this.drawer.visible;break;case"U+0046":// F key
if(s)var o=e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey;else o=e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey;o&&(WebInspector.focusSearchField(),e.preventDefault());break;case"F3":s||(WebInspector.focusSearchField(),e.preventDefault());break;case"U+0047":// G key
s&&e.metaKey&&!e.ctrlKey&&!e.altKey&&(e.shiftKey?this.currentPanel.jumpToPreviousSearchResult&&this.currentPanel.jumpToPreviousSearchResult():this.currentPanel.jumpToNextSearchResult&&this.currentPanel.jumpToNextSearchResult(),e.preventDefault());break;
// Windows and Mac have two different definitions of [, so accept both.
case"U+005B":case"U+00DB":// [ key
if(s)var i=e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!e.altKey;else i=e.ctrlKey&&!e.shiftKey&&!e.metaKey&&!e.altKey;if(i)c=0===(c=this.panelOrder.indexOf(this.currentPanel))?this.panelOrder.length-1:c-1,this.panelOrder[c].toolbarItem.click(),e.preventDefault();break;
// Windows and Mac have two different definitions of ], so accept both.
case"U+005D":case"U+00DD":// ] key
if(s)var a=e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!e.altKey;else a=e.ctrlKey&&!e.shiftKey&&!e.metaKey&&!e.altKey;var c;if(a)c=((c=this.panelOrder.indexOf(this.currentPanel))+1)%this.panelOrder.length,this.panelOrder[c].toolbarItem.click(),e.preventDefault();break;case"U+0052":// R key
(e.metaKey&&s||e.ctrlKey&&!s)&&(InspectorBackend.reloadPage(e.shiftKey),e.preventDefault());break;case"F5":s||InspectorBackend.reloadPage(e.ctrlKey||e.shiftKey)}}},WebInspector.documentCanCopy=function(e){this.currentPanel&&this.currentPanel.handleCopyEvent&&e.preventDefault()},WebInspector.documentCopy=function(e){this.currentPanel&&this.currentPanel.handleCopyEvent&&this.currentPanel.handleCopyEvent(e)},WebInspector.contextMenuEventFired=function(e){(e.handled||e.target.hasStyleClass("popup-glasspane"))&&e.preventDefault()},WebInspector.animateStyle=function(u,g,b){var I,m=0,f=!1,W=1e3/30,v=u.length,y={opacity:""},w="px";
// Pre-process animations.
for(var e=0;e<v;++e){var t=u[e],n=null,r=null,s=null,S=null;for(S in t)"element"===S?n=t[S]:"start"===S?r=t[S]:"end"===S&&(s=t[S]);if(n&&s)if(r)for(S in r)n.style.setProperty(S,r[S]+(S in y?y[S]:w));else{var o=n.ownerDocument.defaultView.getComputedStyle(n);for(S in r={},s)r[S]=parseInt(o.getPropertyValue(S));t.start=r}}function i(){
// Make style changes.
for(var e,t,n,r=(
// Advance forward.
m+=W)+W,s=0;s<v;++s){var o=u[s],i=o.element,a=o.start,c=o.end;if(i&&c){var l=i.style;for(S in c){var d=c[S];if(r<g){var p=a[S],h=(e=m,n=d-(t=p),(e/=g/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t);l.setProperty(S,h+(S in y?y[S]:w))}else l.setProperty(S,d+(S in y?y[S]:w))}}}
// End condition.
g<=m&&(f=!0,clearInterval(I),b&&b())}return I=setInterval(i,W),{cancel:function(){f=!0,clearInterval(I)},forceComplete:function(){f||(m=g,i())}}},WebInspector.updateSearchLabel=function(){if(this.currentPanel){var e=WebInspector.UIString("Search %s",this.currentPanel.toolbarItemLabel);this.attached?document.getElementById("search").setAttribute("placeholder",e):(document.getElementById("search").removeAttribute("placeholder"),document.getElementById("search-toolbar-label").textContent=e)}},WebInspector.focusSearchField=function(){var e=document.getElementById("search");e.focus(),e.select()},WebInspector.toggleAttach=function(){this.attached?InspectorFrontendHost.requestDetachWindow():InspectorFrontendHost.requestAttachWindow()},WebInspector.toolbarDragStart=function(e){if((WebInspector.attached||WebInspector.platformFlavor===WebInspector.PlatformFlavor.MacLeopard||WebInspector.platformFlavor===WebInspector.PlatformFlavor.MacSnowLeopard)&&"qt"!=WebInspector.port){var t=e.target;if(!t.hasStyleClass("toolbar-item")||!t.hasStyleClass("toggleable")){var n=document.getElementById("toolbar");(t===n||t.hasStyleClass("toolbar-item"))&&(n.lastScreenX=e.screenX,n.lastScreenY=e.screenY,WebInspector.elementDragStart(n,WebInspector.toolbarDrag,WebInspector.toolbarDragEnd,e,WebInspector.attached?"row-resize":"default"))}}},WebInspector.toolbarDragEnd=function(e){var t=document.getElementById("toolbar");WebInspector.elementDragEnd(e),delete t.lastScreenX,delete t.lastScreenY},WebInspector.toolbarDrag=function(e){var t=document.getElementById("toolbar");if(WebInspector.attached){var n=window.innerHeight-(e.screenY-t.lastScreenY);InspectorFrontendHost.setAttachedWindowHeight(n)}else{var r=e.screenX-t.lastScreenX,s=e.screenY-t.lastScreenY;
// We cannot call window.moveBy here because it restricts the movement
// of the window at the edges.
InspectorFrontendHost.moveWindowBy(r,s)}t.lastScreenX=e.screenX,t.lastScreenY=e.screenY,e.preventDefault()},WebInspector.elementDragStart=function(e,t,n,r,s){(this._elementDraggingEventListener||this._elementEndDraggingEventListener)&&this.elementDragEnd(r),this._elementDraggingEventListener=t,this._elementEndDraggingEventListener=n,document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",n,!0),document.body.style.cursor=s,r.preventDefault()},WebInspector.elementDragEnd=function(e){document.removeEventListener("mousemove",this._elementDraggingEventListener,!0),document.removeEventListener("mouseup",this._elementEndDraggingEventListener,!0),document.body.style.removeProperty("cursor"),delete this._elementDraggingEventListener,delete this._elementEndDraggingEventListener,e.preventDefault()},WebInspector.toggleSearchingForNode=function(){this.panels.elements&&(this.showPanel("elements"),this.panels.elements.toggleSearchingForNode())},WebInspector.showConsole=function(){this.drawer.showView(this.console)},WebInspector.showPanel=function(e){e in this.panels||(e="elements"),this.currentPanel=this.panels[e]},WebInspector.domContentEventFired=function(e){this.panels.audits.mainResourceDOMContentTime=e,this.panels.network&&(this.panels.network.mainResourceDOMContentTime=e),this.extensionServer.notifyPageDOMContentLoaded(1e3*(e-WebInspector.mainResource.startTime)),this.mainResourceDOMContentTime=e},WebInspector.loadEventFired=function(e){this.panels.audits.mainResourceLoadTime=e,this.panels.network.mainResourceLoadTime=e,this.panels.resources.loadEventFired(),this.extensionServer.notifyPageLoaded(1e3*(e-WebInspector.mainResource.startTime)),this.mainResourceLoadTime=e},WebInspector.searchingForNodeWasEnabled=function(){this.panels.elements.searchingForNodeWasEnabled()},WebInspector.searchingForNodeWasDisabled=function(){this.panels.elements.searchingForNodeWasDisabled()},WebInspector.reset=function(){for(var e in this.debuggerModel.reset(),this.panels){var t=this.panels[e];"reset"in t&&t.reset()}this.resources={},this.highlightDOMNode(0),this.console.clearMessages(),this.extensionServer.notifyInspectorReset()},WebInspector.bringToFront=function(){InspectorFrontendHost.bringToFront()},WebInspector.inspectedURLChanged=function(e){InspectorFrontendHost.inspectedURLChanged(e),this.settings.inspectedURLChanged(e),this.extensionServer.notifyInspectedURLChanged()},WebInspector.log=function(e,r){
// remember 'this' for setInterval() callback
var s=this;
// return indication if we can actually log a message
function t(){return WebInspector.ConsoleMessage&&WebInspector.RemoteObject&&s.console}
// flush the queue of pending messages
function n(){var e=WebInspector.log.queued;if(e){for(var t=0;t<e.length;++t)o(e[t]);delete WebInspector.log.queued}}
// flush the queue if it console is available
// - this function is run on an interval
// actually log the message
function o(e){var t=1;e==WebInspector.log.lastMessage&&(t=WebInspector.log.repeatCount+1),WebInspector.log.lastMessage=e,WebInspector.log.repeatCount=t,
// ConsoleMessage expects a proxy object
e=new WebInspector.RemoteObject.fromPrimitiveValue(e);
// post the message
var n=new WebInspector.ConsoleMessage(WebInspector.ConsoleMessage.MessageSource.Other,WebInspector.ConsoleMessage.MessageType.Log,r||WebInspector.ConsoleMessage.MessageLevel.Debug,-1,null,t,null,[e],null);s.console.addMessage(n)}
// if we can't log the message, queue it
if(!t())return WebInspector.log.queued||(WebInspector.log.queued=[]),WebInspector.log.queued.push(e),void(WebInspector.log.interval||(WebInspector.log.interval=setInterval(function(){t()&&(clearInterval(WebInspector.log.interval),delete WebInspector.log.interval,n())},1e3)));
// flush the pending queue if any
n(),
// log the message
o(e)},WebInspector.drawLoadingPieChart=function(e,t){var n=e.getContext("2d"),r="rgb(122, 168, 218)";n.beginPath(),n.arc(8,8,7,0,2*Math.PI,!1),n.closePath(),n.lineWidth=1,n.strokeStyle=r,n.fillStyle="rgb(228, 241, 251)",n.fill(),n.stroke();var s=-Math.PI/2,o=s+t*Math.PI*2;n.beginPath(),n.moveTo(8,8),n.arc(8,8,7,s,o,!1),n.closePath(),n.fillStyle=r,n.fill()},WebInspector.updateFocusedNode=function(e){this._updateFocusedNode(e),this.highlightDOMNodeForTwoSeconds(e)},WebInspector.displayNameForURL=function(e){if(!e)return"";var t=this.resourceForURL(e);if(t)return t.displayName;if(!WebInspector.mainResource)return e.trimURL("");var n=WebInspector.mainResource.lastPathComponent,r=WebInspector.mainResource.url.indexOf(n);if(-1!==r&&r+n.length===WebInspector.mainResource.url.length){var s=WebInspector.mainResource.url.substring(0,r);if(0===e.indexOf(s))return e.substring(r)}return e.trimURL(WebInspector.mainResource.domain)},WebInspector._choosePanelToShowSourceLine=function(e,t,n){n=n||"resources";var r=this.panels[n];return r&&r.canShowSourceLine(e,t)?r:(r=this.panels.resources).canShowSourceLine(e,t)?r:null},WebInspector.canShowSourceLine=function(e,t,n){return!!this._choosePanelToShowSourceLine(e,t,n)},WebInspector.showSourceLine=function(e,t,n){return this.currentPanel=this._choosePanelToShowSourceLine(e,t,n),!!this.currentPanel&&(this.drawer&&this.drawer.immediatelyFinishAnimation(),this.currentPanel.showSourceLine(e,t),!0)},WebInspector.linkifyStringAsFragment=function(e){for(var t=document.createDocumentFragment(),n=/(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\/\/|www\.)[\w$\-_+*'=\|\/\\(){}[\]%@&#~,:;.!?]{2,}[\w$\-_+*=\|\/\\({%@&#~]/,r=/:(\d+)(:(\d+))?$/;e;){var s=n.exec(e);if(!s)break;var o=s=s[0],i=e.indexOf(s),a=e.substring(0,i);t.appendChild(document.createTextNode(a));var c=WebInspector.ProfileType.URLRegExp.exec(o);c&&(o=WebInspector.panels.profiles.displayTitleForProfileLink(c[2],c[1]));var l=0===s.indexOf("www.")?"http://"+s:s,d=r.exec(l);d&&(l=l.substring(0,l.length-d[0].length));var p=!!WebInspector.resourceForURL(l),h=WebInspector.linkifyURLAsNode(l,o,null,p);t.appendChild(h),d&&(h.setAttribute("line_number",d[1]),h.setAttribute("preferred_panel","scripts")),e=e.substring(i+s.length,e.length)}return e&&t.appendChild(document.createTextNode(e)),t},WebInspector.showProfileForURL=function(e){WebInspector.showPanel("profiles"),WebInspector.panels.profiles.showProfileForURL(e)},WebInspector.linkifyURLAsNode=function(e,t,n,r,s){t||(t=e),n=n?n+" ":"",n+=r?"webkit-html-external-link":"webkit-html-resource-link";
//var a = document.createElement("a");
//a.href = url;
var o=document.createElement("span");return o.className=n,void 0===s?o.title=e:("string"!=typeof s||s.length)&&(o.title=s),o.textContent=t,o},WebInspector.linkifyURL=function(e,t,n,r,s){
// Use the DOM version of this function so as to avoid needing to escape attributes.
// FIXME:  Get rid of linkifyURL entirely.
return WebInspector.linkifyURLAsNode(e,t,n,r,s).outerHTML},WebInspector.linkifyResourceAsNode=function(e,t,n,r,s){var o=WebInspector.displayNameForURL(e);n&&(o+=":"+n);var i=WebInspector.linkifyURLAsNode(e,o,r,!1,s);return i.setAttribute("line_number",n),i.setAttribute("preferred_panel",t),i},WebInspector.resourceURLForRelatedNode=function(e,t){if(!t||0<t.indexOf("://"))return t;for(var n=e;n;n=n.parentNode)if(n.documentURL){var r=WebInspector.completeURL(n.documentURL,t);if(r)return r;break}
// documentURL not found or has bad value
var s=t;return WebInspector.forAllResources(function(e){if(e.path===t)return s=e.url,!0}),s},WebInspector.completeURL=function(e,t){if(t){
// Return absolute URLs as-is.
var n=t.asParsedURL();if(n&&n.scheme)return t}var r=e.asParsedURL();if(r){var s=t;if("/"!==s.charAt(0)){var o,i=r.path;
// A href of "?foo=bar" implies "basePath?foo=bar".
// With "basePath?a=b" and "?foo=bar" we should get "basePath?foo=bar".
if("?"===s.charAt(0)){var a=i.indexOf("?");o=-1!==a?i.substring(0,a):i}else o=i.substring(0,i.lastIndexOf("/"))+"/";s=o+s}else if(1<s.length&&"/"===s.charAt(1))
// href starts with "//" which is a full URL with the protocol dropped (use the baseURL protocol).
return r.scheme+":"+s;return r.scheme+"://"+r.host+(r.port?":"+r.port:"")+s}return null},WebInspector.addMainEventListeners=function(e){
//doc.defaultView.addEventListener("focus", this.windowFocused.bind(this), false);
//doc.defaultView.addEventListener("blur", this.windowBlurred.bind(this), false);
e.addEventListener("click",this.documentClick.bind(this),!0)},WebInspector._searchFieldManualFocus=function(e){this.currentFocusElement=e.target,this._previousFocusElement=e.target},WebInspector._searchKeyDown=function(e){
// Escape Key will clear the field and clear the search results
if(e.keyCode===WebInspector.KeyboardShortcut.Keys.Esc.code){
// If focus belongs here and text is empty - nothing to do, return unhandled.
if(""===e.target.value&&this.currentFocusElement===this.previousFocusElement)return;return e.preventDefault(),e.stopPropagation(),
// When search was selected manually and is currently blank, we'd like Esc stay unhandled
// and hit console drawer handler.
e.target.value="",this.performSearch(e),this.currentFocusElement=this.previousFocusElement,this.currentFocusElement===e.target&&this.currentFocusElement.select(),!1}if(!isEnterKey(e))return!1;
// Select all of the text so the user can easily type an entirely new query.
e.target.select(),
// Only call performSearch if the Enter key was pressed. Otherwise the search
// performance is poor because of searching on every key. The search field has
// the incremental attribute set, so we still get incremental searches.
this.performSearch(e),
// Call preventDefault since this was the Enter key. This prevents a "search" event
// from firing for key down. This stops performSearch from being called twice in a row.
e.preventDefault()},WebInspector.performSearch=function(e){var t="Enter"===e.keyIdentifier;this.doPerformSearch(e.target.value,t,e.shiftKey,!1)},WebInspector.cancelSearch=function(){document.getElementById("search").value="",this.doPerformSearch("")},WebInspector.doPerformSearch=function(e,t,n,r){var s=e.length<3;
// Clear a leftover short search flag due to a non-conflicting forced search.
if(s&&this.shortSearchWasForcedByKeyEvent&&this.currentQuery!==e&&delete this.shortSearchWasForcedByKeyEvent,
// Indicate this was a forced search on a short query.
s&&t&&(this.shortSearchWasForcedByKeyEvent=!0),e&&e.length&&(t||!s))r||e!==this.currentPanel.currentQuery||this.currentPanel.currentQuery!==this.currentQuery?(this.currentQuery=e,this.updateSearchMatchesCount(),this.currentPanel.performSearch&&(this.currentPanel.currentQuery=e,this.currentPanel.performSearch(e))):
// When this is the same query and a forced search, jump to the next
// search result for a good user experience.
t&&(!n&&this.currentPanel.jumpToNextSearchResult?this.currentPanel.jumpToNextSearchResult():n&&this.currentPanel.jumpToPreviousSearchResult&&this.currentPanel.jumpToPreviousSearchResult());else{
// Prevent clobbering a short search forced by the user.
if(this.shortSearchWasForcedByKeyEvent)return void delete this.shortSearchWasForcedByKeyEvent;for(var o in delete this.currentQuery,this.panels){var i=this.panels[o],a=!!i.currentQuery;delete i.currentQuery,a&&i.searchCanceled&&i.searchCanceled()}this.updateSearchMatchesCount()}},WebInspector.frontendReused=function(){this.networkManager.reset(),this.reset()},WebInspector.addNodesToSearchResult=function(e){WebInspector.panels.elements.addNodesToSearchResult(e)},WebInspector.updateSearchMatchesCount=function(e,t){if(t||(t=this.currentPanel),t.currentSearchMatches=e,t===this.currentPanel)if(this.currentPanel.currentQuery){if(e)if(1===e)var n=WebInspector.UIString("1 match");else n=WebInspector.UIString("%d matches",e);else n=WebInspector.UIString("Not Found");var r=document.getElementById("search-results-matches");r.removeStyleClass("hidden"),r.textContent=n}else document.getElementById("search-results-matches").addStyleClass("hidden")},WebInspector.UIString=function(e){return window.localizedStrings&&e in window.localizedStrings?e=window.localizedStrings[e]:(e in WebInspector.missingLocalizedStrings||(WebInspector.InspectorBackendStub||console.error('Localized string "'+e+'" not found.'),WebInspector.missingLocalizedStrings[e]=!0),Preferences.showMissingLocalizedStrings&&(e+=" (not localized)")),String.vsprintf(e,Array.prototype.slice.call(arguments,1))},WebInspector.formatLocalized=function(e,t,n,r,s){return String.format(WebInspector.UIString(e),t,n,r,s)},WebInspector.isMac=function(){return"_isMac"in this||(this._isMac="mac"===WebInspector.platform),this._isMac},WebInspector.isBeingEdited=function(e){return e.__editing},WebInspector.isEditingAnyField=function(){return this.__editing}
// Available config fields (all optional):
// context: Object - an arbitrary context object to be passed to the commit and cancel handlers
// commitHandler: Function - handles editing "commit" outcome
// cancelHandler: Function - handles editing "cancel" outcome
// customFinishHandler: Function - custom finish handler for the editing session (invoked on keydown)
// pasteHandler: Function - handles the "paste" event, return values are the same as those for customFinishHandler
// multiline: Boolean - whether the edited element is multiline
,WebInspector.startEditing=function(n,r){if(!n.__editing){n.__editing=!0,WebInspector.__editing=!0;var e=(r=r||{}).commitHandler,t=r.cancelHandler,s=r.pasteHandler,o=r.context,i=d(n),a="";n.addStyleClass("editing");var c=n.tabIndex;return n.tabIndex<0&&(n.tabIndex=0),n.addEventListener("blur",l,!1),n.addEventListener("keydown",m,!0),s&&n.addEventListener("paste",I,!0),WebInspector.currentFocusElement=n,{cancel:h.bind(n),commit:u.bind(n)}}function l(){u.call(n)}function d(e){return"INPUT"===e.tagName&&"text"===e.type?e.value:e.textContent}function p(){delete this.__editing,delete WebInspector.__editing,this.removeStyleClass("editing"),this.tabIndex=c,this.scrollTop=0,this.scrollLeft=0,n.removeEventListener("blur",l,!1),n.removeEventListener("keydown",m,!0),s&&n.removeEventListener("paste",I,!0),(n===WebInspector.currentFocusElement||n.isAncestor(WebInspector.currentFocusElement))&&(WebInspector.currentFocusElement=WebInspector.previousFocusElement)}function h(){"INPUT"===this.tagName&&"text"===this.type?this.value=i:this.textContent=i,p.call(this),t&&t(this,o)}function u(){p.call(this),e&&e(this,d(this),i,o,a)}function g(e){var t=WebInspector.isMac()?e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!e.altKey:e.ctrlKey&&!e.shiftKey&&!e.metaKey&&!e.altKey;return!isEnterKey(e)||r.multiline&&!t?e.keyCode===WebInspector.KeyboardShortcut.Keys.Esc.code?"cancel":"U+0009"===e.keyIdentifier?"move-"+(e.shiftKey?"backward":"forward"):void 0:"commit"}function b(e,t){"commit"===e?(u.call(n),t.preventDefault(),t.stopPropagation()):"cancel"===e?(h.call(n),t.preventDefault(),t.stopPropagation()):e&&0===e.indexOf("move-")&&(a=e.substring(5),"U+0009"!==t.keyIdentifier&&l())}function I(e){b(s(e),e)}function m(e){b((r.customFinishHandler||g)(e),e)}},WebInspector._toolbarItemClicked=function(e){var t=e.currentTarget;this.currentPanel=t.panel}
// This table maps MIME types to the Resource.Types which are valid for them.
// The following line:
//    "text/html":                {0: 1},
// means that text/html is a valid MIME type for resources that have type
// WebInspector.Resource.Type.Document (which has a value of 0).
,WebInspector.MIMETypes={"text/html":{0:!0},"text/xml":{0:!0},"text/plain":{0:!0},"application/xhtml+xml":{0:!0},"text/css":{1:!0},"text/xsl":{1:!0},"image/jpeg":{2:!0},"image/png":{2:!0},"image/gif":{2:!0},"image/bmp":{2:!0},"image/vnd.microsoft.icon":{2:!0},"image/x-icon":{2:!0},"image/x-xbitmap":{2:!0},"font/ttf":{3:!0},"font/opentype":{3:!0},"application/x-font-type1":{3:!0},"application/x-font-ttf":{3:!0},"application/x-font-woff":{3:!0},"application/x-truetype-font":{3:!0},"text/javascript":{4:!0},"text/ecmascript":{4:!0},"application/javascript":{4:!0},"application/ecmascript":{4:!0},"application/x-javascript":{4:!0},"text/javascript1.1":{4:!0},"text/javascript1.2":{4:!0},"text/javascript1.3":{4:!0},"text/jscript":{4:!0},"text/livescript":{4:!0}},WebInspector.PanelHistory=function(){this._history=[],this._historyIterator=-1},WebInspector.PanelHistory.prototype={canGoBack:function(){return 0<this._historyIterator},goBack:function(){this._inHistory=!0,WebInspector.currentPanel=WebInspector.panels[this._history[--this._historyIterator]],delete this._inHistory},canGoForward:function(){return this._historyIterator<this._history.length-1},goForward:function(){this._inHistory=!0,WebInspector.currentPanel=WebInspector.panels[this._history[++this._historyIterator]],delete this._inHistory},setPanel:function(e){this._inHistory||(this._history.splice(this._historyIterator+1,this._history.length-this._historyIterator-1),this._history.length&&this._history[this._history.length-1]===e||this._history.push(e),this._historyIterator=this._history.length-1)}};